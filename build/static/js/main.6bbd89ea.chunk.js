(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var c=t(16),r=t.n(c),o=t(17),i=t(3),a=t(2),u=t(5),l=t.n(u),s="https://safe-sea-01925.herokuapp.com/api/persons",d={getAll:function(){return l.a.get(s).then((function(e){return e.data}))},create:function(e){return l.a.post(s,e).then((function(e){return e.data}))},pop:function(e){l.a.delete("".concat(s,"/").concat(e))},insert:function(e,n){return l.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))}},b=t(0),f=function(e){var n=e.message;return null===n?null:Object(b.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n})},j=function(e){var n=e.message;return null===n?null:Object(b.jsx)("div",{style:{color:"red",background:"white",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n})},h=function(e){return Object(b.jsxs)("form",{onSubmit:e.addPerson,children:[Object(b.jsxs)("div",{children:["name:",Object(b.jsx)("input",{value:e.newName,onChange:e.handleNameChange})]}),Object(b.jsxs)("div",{children:["number:",Object(b.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){return Object(b.jsxs)("div",{children:["filter shown with: ",Object(b.jsx)("input",{value:e.filter,onChange:e.handleFilterChange})]})},O=function(e){var n=e.persons,t=e.filter,c=e.confirmDeletion;return""===t?n.map((function(e){return Object(b.jsxs)("li",{children:[" ",e.name," ",e.number," ",Object(b.jsx)("button",{onClick:function(){return c(e)},children:" delete"})]},n.indexOf(e))})):n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(b.jsxs)("li",{children:[" ",e.name," ",e.number," ",Object(b.jsx)("button",{onClick:function(){return c(e)},children:" delete"})]},n.indexOf(e))}))},p=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),u=Object(i.a)(r,2),l=u[0],s=u[1],p=Object(a.useState)(""),x=Object(i.a)(p,2),g=x[0],v=x[1],w=Object(a.useState)(""),C=Object(i.a)(w,2),S=C[0],k=C[1],y=Object(a.useState)(null),N=Object(i.a)(y,2),A=N[0],D=N[1],P=Object(a.useState)(null),T=Object(i.a)(P,2),B=T[0],I=T[1];Object(a.useEffect)((function(){d.getAll().then((function(e){c(e)}))}),[]);return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(f,{message:A}),Object(b.jsx)(j,{message:B}),Object(b.jsx)(m,{handleFilterChange:function(e){k(e.target.value)},filter:S}),Object(b.jsx)("h2",{children:"add a new"}),Object(b.jsx)(h,{handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){v(e.target.value)},newName:l,newNumber:g,addPerson:function(e){e.preventDefault();var n={name:l,number:g};if(t.map((function(e){return e.name})).includes(l)){var r=window.confirm("".concat(l," is already added to the phonebook, replace the old number with a new one?"));if(console.log(r),r){var i=t.findIndex((function(e){return e.name===l}));d.insert(t[i].id,n).then((function(e){var n=Object(o.a)(t);n[i]=e,c(n)})).catch((function(e){I("Information of ".concat(n.name," has already been removed from the server")),setTimeout((function(){I(null)}),4e3),d.getAll().then((function(e){c(e)}))})),s(""),v(""),null!=B&&(D("Changed ".concat(n.name,"'s number")),setTimeout((function(){D(null)}),2e3))}}else d.create(n).then((function(e){c(t.concat(e))})),s(""),v(""),D("Added ".concat(n.name)),setTimeout((function(){D(null)}),2e3)},event:undefined}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(O,{persons:t,filter:S,setPersons:c,confirmDeletion:function(e){var n=window.confirm("Delete ".concat(e.name," ?"));console.log(e.id),n?(d.pop(e.id),c(t.filter((function(n){return n.id!==e.id}))),D("Removed ".concat(e.name)),setTimeout((function(){D(null)}),2e3)):console.log("not confirmed")}})]})};r.a.render(Object(b.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.6bbd89ea.chunk.js.map