{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","personService","getAll","axios","get","then","response","data","create","person","post","pop","id","delete","insert","put","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","ErrorMessage","PersonForm","props","onSubmit","addPerson","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","FilterForm","filter","handleFilterChange","RenderPersons","persons","confirmDeletion","map","name","number","onClick","indexOf","persone","toLowerCase","includes","App","useState","setPersons","setNewName","setNewNumber","setFilter","notificationMessage","setNotificationMessage","errorMessage","setErrorMessage","useEffect","initialPersons","event","target","preventDefault","persones","overwrite","window","confirm","console","log","oldPersonIndex","findIndex","p","returnedPerson","newPersons","catch","error","setTimeout","updatedPersons","concat","result","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e306084f.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = person => {\r\n  const request = axios.post(baseUrl, person)\r\n  return request.then(response => response.data)\r\n}\r\nconst pop = id => {\r\n    axios.delete(`${baseUrl}/${id}`)\r\n}\r\nconst insert= (id, person) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, person)\r\n  return request.then(response => response.data)\r\n}\r\nconst personService =\r\n{ \r\n    getAll, \r\n    create,\r\n    pop,\r\n    insert\r\n}\r\nexport default personService;","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\n\r\nconst Notification = ({ message }) => {\r\n  const notificationStyle = {\r\n      color: 'green',\r\n      background: 'lightgrey',\r\n      fontSize: '20px',\r\n      borderStyle: 'solid',\r\n      borderRadius: '5px',\r\n      padding: '10px',\r\n      marginBottom: '10px'\r\n  }\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div style={notificationStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ErrorMessage = ({ message }) => {\r\n  const errorStyle = {\r\n      color: 'red',\r\n      background: 'white',\r\n      fontSize: '20px',\r\n      borderStyle: 'solid',\r\n      borderRadius: '5px',\r\n      padding: '10px',\r\n      marginBottom: '10px'\r\n  }\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div style={errorStyle}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nconst PersonForm = (props) => {\r\nreturn (\r\n  <form onSubmit={props.addPerson}>\r\n    <div>\r\n    name: \r\n    <input \r\n    value = {props.newName}\r\n    onChange = {props.handleNameChange}\r\n    />\r\n  </div>\r\n  <div>\r\n    number: \r\n    <input \r\n    value = {props.newNumber}\r\n    onChange = {props.handleNumberChange}\r\n    />\r\n  </div>\r\n  <div>\r\n  <button type=\"submit\">add</button>\r\n  </div>\r\n  </form>\r\n)\r\n}\r\n\r\nconst FilterForm = (props) => {\r\n  return(\r\n    <div>\r\n      filter shown with: <input value = {props.filter}\r\n      onChange= {props.handleFilterChange}/>\r\n  </div>\r\n  )\r\n}\r\n\r\nconst RenderPersons = ({persons, filter, confirmDeletion}) =>{\r\n  if (filter === '') {\r\n    return(persons.map(person =>\r\n      <li \r\n      key={persons.indexOf(person)}> {person.name} {person.number} <button onClick= { () => confirmDeletion(person)}> delete</button>\r\n      </li>))\r\n  }\r\n  else{\r\n    return(persons.filter(persone => persone.name.toLowerCase().includes(filter.toLowerCase())).map(person =>\r\n      <li \r\n      key={persons.indexOf(person)}> {person.name} {person.number} <button onClick= { () => confirmDeletion(person)}> delete</button>\r\n      </li>))\r\n  }\r\n}\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber] = useState('')\r\n  const [ filter, setFilter] = useState('')\r\n  const [ notificationMessage, setNotificationMessage] = useState(null)\r\n  const [ errorMessage, setErrorMessage] = useState(null)\r\n\r\n  function confirmDeletion (person) {\r\n    const result = window.confirm(`Delete ${person.name} ?`)\r\n    console.log(person.id)\r\n    if (result) {\r\n      personService\r\n        .pop(person.id)\r\n    setPersons(persons.filter(persone => persone.id !== person.id))\r\n    setNotificationMessage(`Removed ${person.name}`)\r\n    setTimeout(() => {\r\n      setNotificationMessage(null)\r\n    }, 2000)\r\n    }\r\n    else {\r\n      console.log('not confirmed')\r\n      return\r\n    }\r\n  }\r\n  useEffect(()=> {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n  const handleFilterChange = (event) => {\r\n    setFilter(event.target.value)\r\n  }\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    const person = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    const personas = persons.map(persones => persones.name) \r\n    if (personas.includes(newName)){\r\n      const overwrite = window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)\r\n      console.log(overwrite)\r\n      if (overwrite) {\r\n        const oldPersonIndex = persons.findIndex(p => p.name === newName)\r\n        personService\r\n          .insert(persons[oldPersonIndex].id,person)\r\n          .then(returnedPerson => {\r\n            let newPersons = [...persons]\r\n            newPersons[oldPersonIndex] = returnedPerson\r\n            setPersons(newPersons)\r\n          })\r\n          .catch(error => {\r\n            setErrorMessage(`Information of ${person.name} has already been removed from the server`)\r\n            setTimeout(() => {\r\n              setErrorMessage(null)\r\n            }, 4000)\r\n            personService\r\n              .getAll()\r\n              .then(updatedPersons => {\r\n                setPersons(updatedPersons)\r\n                })\r\n          })\r\n          setNewName('')\r\n          setNewNumber('')\r\n          if (errorMessage != null){\r\n            setNotificationMessage(`Changed ${person.name}'s number`)\r\n            setTimeout(() => {\r\n              setNotificationMessage(null)\r\n            }, 2000)\r\n          }\r\n      }\r\n      return\r\n    }\r\n    personService\r\n      .create(person)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson))\r\n      })\r\n    setNewName('')\r\n    setNewNumber('')\r\n    setNotificationMessage(`Added ${person.name}`)\r\n    setTimeout(() => {\r\n      setNotificationMessage(null)\r\n    }, 2000)\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={notificationMessage}/>\r\n      <ErrorMessage message ={errorMessage}/>\r\n      <FilterForm handleFilterChange = {handleFilterChange} filter = {filter}/>\r\n      <h2>add a new</h2>\r\n      <PersonForm handleNameChange={handleNameChange} handleNumberChange= {handleNumberChange} newName= {newName} \r\n      newNumber ={newNumber} addPerson= {addPerson} event= {this}/>\r\n      <h2>Numbers</h2>\r\n      <RenderPersons persons = {persons} filter= {filter} setPersons={setPersons} confirmDeletion = {confirmDeletion}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}